<div class="row">
    <div class="col-md-12">
        <p class="lead">Users <span class="badge badge-info"><%= @users.count %> </span></p>
    </div>
</div>

<div class="card-columns">
    <% @users.each do |user| %>
    <%= render 'users/user', user: user %>
    <% end %>
</div>


<%= search_form_for @q do |f| %>
<%= f.search_field :email_cont, placeholder: 'Search by username' %>
<%= f.search_field :sign_in_count_eq, placeholder: 'Sign in count' %>
<%= f.submit %>
<br>
<%= link_to users_path, class:'btn btn-sm btn-secondary' do %>
<i class="fas fa-sync"></i>
<% end %>
<% end %>
<table class="table table-bordered">
    <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col"><%= sort_link(@q, :email) %></th>
            <th scope="col"><%= sort_link(@q, :created_at) %></th>
            <th scope="col"><%= 'sign_in_count'.humanize %></th>
            <th scope="col"><%= 'current_sign_in_at'.humanize %></th>
            <th scope="col"><%= 'last_sign_in_at'.humanize %></th>
            <th scope="col"><%= 'current_sign_in_at'.humanize %></th>
            <th scope="col"><%= 'last_sign_in_ip'.humanize %></th>
            <th scope="col"><%= 'Roles' %></th>
        </tr>
    </thead>
    <tbody>
        <% @users.each do |user|%>
        <tr>
            <th scope="row"><%= user.id %></th>
            <td scope="row"><%= user.email %></td>
            <td scope="row"><%= user.created_at %></td>
            <td scope="row"><%= user.sign_in_count %></td>
            <td scope="row"><%= user.current_sign_in_at %></td>
            <td scope="row"><%= user.last_sign_in_at %></td>
            <td scope="row"><%= user.current_sign_in_at %></td>
            <td scope="row"><%= user.last_sign_in_ip %></td>
            <td scope="row">
                <% user.roles.each do |role| %>
                <%= role.name %>
                <% end %>
            </td>
        </tr>
        <% end %>
    </tbody>

</table>